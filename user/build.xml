<project name="user" default="all" basedir=".">
	<property name="gwt.root" location=".." />
	<property name="project.tail" value="user" />
	<import file="${gwt.root}/common.ant.xml" />

	<property.ensure name="gwt.core.root" location="${gwt.root}/dev/core" />
	<property.ensure name="gwt.core.build" location="${gwt.build.out}/dev/core" />

	<target name="build" description="Compiles this project">
		<mkdir dir="${javac.out}" />
		<gwt.javac>
			<classpath>
				<pathelement location="${gwt.tools.lib}/junit/junit-3.8.1.jar" />
				<pathelement location="${gwt.core.build}/bin" />
				<pathelement location="${gwt.core.build}/unjar" />
				<!-- Must build against a version of SWT; just pick one -->
				<pathelement location="${gwt.tools.lib}/eclipse/org.eclipse.swt.gtk-linux-3.2.1.jar" />
			</classpath>
		</gwt.javac>
	</target>

	<target name="package" depends="build" description="Packages this project into a jar">
		<mkdir dir="${gwt.build.lib}" />
		<gwt.jar>
			<fileset dir="src" />
			<fileset dir="super" />
			<fileset dir="${javac.out}" />
		</gwt.jar>
	</target>

	<target name="verify" description="Static analysis of source">
		<gwt.checkstyle>
			<fileset dir="super/com/google/gwt/emul"/>
			<fileset dir="super/com/google/gwt/junit/translatable"/>
		</gwt.checkstyle>
	</target>
	
	<target name="clean" description="Cleans this project's intermediate and output files">
		<delete dir="${project.build}" />
		<delete file="${project.lib}" />
	</target>

	<target name="all" depends="package" description="Build and packages this project" />

</project>
