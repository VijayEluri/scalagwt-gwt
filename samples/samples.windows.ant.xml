<project name="build" default="all" basedir=".">
    <property name="root" location="../../../../.." />
    <property name="java" value="${root}/java" />
    <property name="out" location="${root}/out" />
    <property name="samples" location="${out}/samples-windows" />
    <property name="devjar" value="gwt-dev-windows.jar" />

    <target name="init">
        <mkdir dir="${samples}" />
    </target>

    <target name="KitchenSink" depends="init">
        <mkdir dir="${samples}/KitchenSink/src"/>
        <copy todir="${samples}/KitchenSink/src">
            <fileset dir="${java}" includes="com/google/gwt/sample/kitchensink/**"/>
        </copy>
        <mkdir dir="${samples}/KitchenSink/bin"/>
        <javac srcdir="${samples}/KitchenSink/src" destdir="${samples}/KitchenSink/bin" classpath="${out}/gwt-user.jar" debug="true" debuglevel="lines,vars,source" source="1.4" nowarn="on">
            <include name="com/google/gwt/sample/kitchensink/**"/>
        </javac>
        <java classname="com.google.gwt.dev.ApplicationCreator" classpath="${out}/dev.jar" fork="yes" failonerror="true">
			<jvmarg value="-Dgwt.devjar=../../${devjar}"/>
			<arg value="-ignore"/>

			<arg value="-out"/>
			<arg file="${samples}/KitchenSink"/>

			<arg value="com.google.gwt.sample.kitchensink.client.KitchenSink"/>
        </java>
        <java classname="com.google.gwt.dev.GWTCompiler" classpath="${samples}/KitchenSink/src:${out}/gwt-user.jar:${out}/dev.jar" fork="yes" failonerror="true">
			<arg value="-out"/>
			<arg file="${samples}/KitchenSink/www"/>
			<arg value="com.google.gwt.sample.kitchensink.KitchenSink"/>
        </java>
    </target>

    <target name="DynaTable" depends="init">
        <mkdir dir="${samples}/DynaTable/src"/>
        <copy todir="${samples}/DynaTable/src">
            <fileset dir="${java}" includes="com/google/gwt/sample/dynatable/**"/>
        </copy>
        <mkdir dir="${samples}/DynaTable/bin"/>
        <javac srcdir="${samples}/DynaTable/src" destdir="${samples}/DynaTable/bin" classpath="${out}/gwt-user.jar" debug="true" debuglevel="lines,vars,source" source="1.4" nowarn="on">
            <include name="com/google/gwt/sample/dynatable/**"/>
        </javac>
        <java classname="com.google.gwt.dev.ApplicationCreator" classpath="${out}/dev.jar" fork="yes" failonerror="true">
			<jvmarg value="-Dgwt.devjar=../../${devjar}"/>
			<arg value="-ignore"/>

			<arg value="-out"/>
			<arg file="${samples}/DynaTable"/>

			<arg value="com.google.gwt.sample.dynatable.client.DynaTable"/>
        </java>
        <java classname="com.google.gwt.dev.GWTCompiler" classpath="${samples}/DynaTable/src:${out}/gwt-user.jar:${out}/dev.jar" fork="yes" failonerror="true">
			<arg value="-out"/>
			<arg file="${samples}/DynaTable/www"/>
			<arg value="com.google.gwt.sample.dynatable.DynaTable"/>
        </java>
    </target>

    <target name="Mail" depends="init">
        <mkdir dir="${samples}/Mail/src"/>
        <copy todir="${samples}/Mail/src">
            <fileset dir="${java}" includes="com/google/gwt/sample/mail/**"/>
        </copy>
        <mkdir dir="${samples}/Mail/bin"/>
        <javac srcdir="${samples}/Mail/src" destdir="${samples}/Mail/bin" classpath="${out}/gwt-user.jar" debug="true" debuglevel="lines,vars,source" source="1.4" nowarn="on">
            <include name="com/google/gwt/sample/mail/**"/>
        </javac>
        <java classname="com.google.gwt.dev.ApplicationCreator" classpath="${out}/dev.jar" fork="yes" failonerror="true">
			<jvmarg value="-Dgwt.devjar=../../${devjar}"/>
			<arg value="-ignore"/>

			<arg value="-out"/>
			<arg file="${samples}/Mail"/>

			<arg value="com.google.gwt.sample.mail.client.Mail"/>
        </java>
        <java classname="com.google.gwt.dev.GWTCompiler" classpath="${samples}/Mail/src:${out}/gwt-user.jar:${out}/dev.jar" fork="yes" failonerror="true">
			<arg value="-out"/>
			<arg file="${samples}/Mail/www"/>
			<arg value="com.google.gwt.sample.mail.Mail"/>
        </java>
    </target>

    <target name="JSON" depends="init">
        <mkdir dir="${samples}/JSON/src"/>
        <copy todir="${samples}/JSON/src">
            <fileset dir="${java}" includes="com/google/gwt/sample/json/**"/>
        </copy>
        <mkdir dir="${samples}/JSON/bin"/>
        <javac srcdir="${samples}/JSON/src" destdir="${samples}/JSON/bin" classpath="${out}/gwt-user.jar" debug="true" debuglevel="lines,vars,source" source="1.4" nowarn="on">
            <include name="com/google/gwt/sample/json/**"/>
        </javac>
        <java classname="com.google.gwt.dev.ApplicationCreator" classpath="${out}/dev.jar" fork="yes" failonerror="true">
			<jvmarg value="-Dgwt.devjar=../../${devjar}"/>
			<arg value="-ignore"/>

			<arg value="-out"/>
			<arg file="${samples}/JSON"/>

			<arg value="com.google.gwt.sample.json.client.JSON"/>
        </java>
        <java classname="com.google.gwt.dev.GWTCompiler" classpath="${samples}/JSON/src:${out}/gwt-user.jar:${out}/dev.jar" fork="yes" failonerror="true">
			<arg value="-out"/>
			<arg file="${samples}/JSON/www"/>
			<arg value="com.google.gwt.sample.json.JSON"/>
        </java>
    </target>

    <target name="Hello" depends="init">
        <mkdir dir="${samples}/Hello/src"/>
        <copy todir="${samples}/Hello/src">
            <fileset dir="${java}" includes="com/google/gwt/sample/hello/**"/>
        </copy>
        <mkdir dir="${samples}/Hello/bin"/>
        <javac srcdir="${samples}/Hello/src" destdir="${samples}/Hello/bin" classpath="${out}/gwt-user.jar" debug="true" debuglevel="lines,vars,source" source="1.4" nowarn="on">
            <include name="com/google/gwt/sample/hello/**"/>
        </javac>
        <java classname="com.google.gwt.dev.ApplicationCreator" classpath="${out}/dev.jar" fork="yes" failonerror="true">
			<jvmarg value="-Dgwt.devjar=../../${devjar}"/>
			<arg value="-ignore"/>

			<arg value="-out"/>
			<arg file="${samples}/Hello"/>

			<arg value="com.google.gwt.sample.hello.client.Hello"/>
        </java>
        <java classname="com.google.gwt.dev.GWTCompiler" classpath="${samples}/Hello/src:${out}/gwt-user.jar:${out}/dev.jar" fork="yes" failonerror="true">
			<arg value="-out"/>
			<arg file="${samples}/Hello/www"/>
			<arg value="com.google.gwt.sample.hello.Hello"/>
        </java>
    </target>

    <target name="clean">
        <delete dir="${out}/samples"/>
    </target>
    
    <target name="all" depends="KitchenSink, DynaTable, Mail, JSON, Hello"/>
</project>
