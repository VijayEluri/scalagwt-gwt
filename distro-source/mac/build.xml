<project name="dist-mac" default="all" basedir=".">
	<property name="dist.platform" value="mac" />
	<import file="../common.ant.xml" />
	<property name="project.dist" location="${gwt.build.dist}/${project.distname}.tar.gz" />

	<target name="build.platform" description="Copies platform-specific items into the staging area">
		<gwt.untar src="${gwt.tools.redist}/webkit/WebKit-418.9.tar.gz" dest="${project.staging}" />
		<copy todir="${project.staging}">
			<fileset dir="${gwt.tools.lib}/eclipse">
				<include name="libswt-*carbon-3235.jnilib" />
				<!-- User our modified version instead of this stock version -->
				<exclude name="libswt-webkit-carbon-3235.jnilib" />
			</fileset>
		</copy>
	</target>

	<target name="package" depends="build" description="Packages the distro staging area">
		<mkdir dir="${gwt.build.dist}" />
		<!-- GNU tar handles permissions and symlinks correctly -->
		<exec executable="tar" failonerror="true">
			<arg value="-cpzf" />
			<arg value="${project.dist}" />
			<arg value="-C" />
			<arg file="${gwt.build.staging}" />
			<arg value="${project.distname}" />
		</exec>
	</target>

	<target name="all" depends="package" description="Builds and packages this project" />
</project>
