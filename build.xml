<project name="GWT" default="build" basedir=".">
	<property name="gwt.root" location="." />
	<property name="project.tail" value="" />
	<import file="${gwt.root}/common.ant.xml" />

	<!-- "build" is the default when subprojects are directly targetted -->
	<property name="target" value="build" />

	<target name="dist" depends="dev, user, servlet, jni" description="Run the distributions">
		<ant dir="distro-source" inheritall="false" target="${target}" />
	</target>

	<target name="dev" description="Run dev">
		<ant dir="dev" inheritall="false" target="${target}" />
	</target>

	<target name="user" depends="dev" description="Run user">
		<ant dir="user" inheritall="false" target="${target}" />
	</target>

	<target name="servlet" depends="user" description="Run servlet">
		<ant dir="servlet" inheritall="false" target="${target}" />
	</target>

	<target name="jni" description="Run jni">
		<ant dir="jni" inheritall="false" target="${target}" />
	</target>

	<target name="-do" depends="dist" description="Run all subprojects"/>
	
	<target name="build" description="Builds GWT">
		<antcall target="-do">
			<param name="target" value="build" />
		</antcall>
	</target>

	<target name="checkstyle" description="Static analysis of GWT source">
		<antcall target="-do">
			<param name="target" value="checkstyle" />
		</antcall>
	</target>

	<target name="test" depends="build" description="Test GWT">
		<antcall target="-do">
			<param name="target" value="test" />
		</antcall>
	</target>
</project>
